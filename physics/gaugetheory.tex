\documentclass{book}
\usepackage[utf8]{inputenc}

\usepackage{todonotes}
\usepackage{tikz-cd}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumerate}

\usepackage{hyperref}
\hypersetup{
    colorlinks = true,
    citecolor = gray
}

\newcommand{\nm}[1]{\;\textnormal{#1}\;}
\newcommand{\ra}[0]{\rightarrow}
\newcommand{\fa}[0]{\;\forall}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\CP}{\mathbb{C}\mathbb{P}}
\newcommand{\RP}{\mathbb{R}\mathbb{P}}
\newcommand{\Proj}{\mathbb{P}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\HH}{\mathbb{H}}
\newcommand{\p}{\partial}
\newcommand{\fr}{\mathfrak}


\DeclareMathOperator{\Real}{Re}
\DeclareMathOperator{\Imag}{Im}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\length}{length}
\DeclareMathOperator{\res}{Res}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\id}{Id}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\irr}{irr}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\OO}{OO}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Ad}{Ad}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\theoremstyle{definition}
\newtheorem{defn}{Definition}
\newtheorem{exc}{Exercise}
\newtheorem{exmp}{Example}
\theoremstyle{remark}
\newtheorem*{rmk}{Remark}

\title{Notes on Gauge Theory}
\author{Matei Ionita and Nilay Kumar}
\date{Fall 2013}

\begin{document}

\maketitle

\tableofcontents

\hypersetup{linkcolor=blue}

\setcounter{chapter}{-1}

\newpage

\chapter{Introduction}

% Prerequisite knowledge:
% - Working knowledge of differential topology (manifolds, vector bundles, fields and forms), rudiments of geometry (metrics, etc.)
% Basic algebraic topology, i.e. fundamental group
% - Basic familiarity with Lie groups, lie algebras, group actions, and representations.
% - Physics knowledge: Maxwell's equations, quantum mechanics, and basics of quantum field theory

\chapter{Principal Bundles}

\section{Definition and examples}\todo{add more basic content}

Let $G$ be a Lie group with identity $e$. A \textbf{right $G$-space} is a smooth manifold $X$ equipped with a smooth right action $X\times G\to X$. 
A \textbf{left $G$-space} is defined similarly, though we will primarily deal with right $G$-spaces in these notes\todo{add footnote about conventions, see Naber}.
We will typically denote the action of $G$ on a $G$-space by a ``$\cdot$'', even when there may
be multiple $G$-spaces present, as the particular action should be clear from the context.
If $X$ and $Y$ are two right $G$-spaces, a map $\phi:X\to Y$ is said to be \textbf{$G$-equivariant} (or equivalently, a map of right $G$-spaces) if the diagram
\[\begin{tikzcd}
        X\arrow[swap]{d}{g}\arrow{r}{\phi}&Y\arrow{d}{g}\\
        X\arrow{r}{\phi}&Y
\end{tikzcd}\]
commutes, i.e. $\phi(x\cdot g)=\phi(x)\cdot g$ in the case of left $G$-spaces.

\begin{defn}
    Let $X$ and $P$ be right $G$-spaces and $\pi: P\to X$ be a smooth $G$-equivariant projection onto $X$.
    We say that $(P,\pi)$ is a \textbf{principal $G$-bundle over the base space} $X$ if the following two conditions hold:
    \begin{enumerate}[(i)]
        \item $G$ acts trivially on $X$, i.e. $x\cdot g=x$ for all $x\in X$ and $g\in G$;
        \item $X$ has an open cover $\{U_\alpha\}_{\alpha\in A}$ for which there exist $G$-equivariant diffeomorphisms $\phi_\alpha:\pi^{-1}(U_\alpha)\to U_\alpha\times G$ called \textbf{local trivializations} such that the diagram
            \[\begin{tikzcd}[column sep=small]
                \pi^{-1}(U_\alpha)\arrow[swap]{dr}{\pi}\arrow{rr}{\phi_\alpha}&&U\times G\arrow{dl}{\pi_\alpha}\\
                &U_\alpha&
            \end{tikzcd}\]
            commutes, where $\pi_\alpha$ is projection onto the first component. Here, $U\times G$ has the structure of a right $G$-space such that $(u,g)\cdot h=(u,gh)$.
    \end{enumerate}
    We will also often denote the bundle $(P,\pi)$ as $G\to P\to X$.
\end{defn}

Note that the first condition above is equivalent to requiring the action of $G$ to preserve the fibers of $\pi$,
\[\pi(p\cdot g)=\pi(p)\cdot g=\pi(p).\]
In fact, we can say more, as the following lemma shows.

\begin{lem}
    Given an $x\in X$ and some $p\in\pi^{-1}(x)$ above $x$, the orbit of $p$ under the action of $G$ is the whole fiber:
    \[\pi^{-1}(x)=\{p\cdot g: g\in G\}=p\cdot G.\]
\end{lem}
\begin{proof}
    The inclusion $p\cdot G\subseteq \pi^{-1}(x)$ holds due to condition (i). To show the reverse inclusion, $\pi^{-1}(x)\subseteq p\cdot G$, it suffices to show that for any $q\in\pi^{-1}(x)$, there exists an $h\in G$ such that $p\cdot h=q$. Using condition (ii) we can take advantage of the equivariant local trivialization and work instead in local coordinates, $\phi(p)=(x, g_1)$ and $\phi(q)=(x,g_2)$, for some $g_1,g_2\in G$. Then $\phi(p)\cdot (g_1^{-1}g_2)=\phi(q)$, which implies (by injectivity of $\phi$) that $p\cdot h=q$ for $h=g_1^{-1}g_2$.
\end{proof}

Hence we may identify the fibers of $\pi$ with the group $G$.
Informally, then, one can think of a principal bundle as a space that is locally just the product of a base manifold $X$ with a Lie group $G$.
Globally, however, there may exist topological complications; consider, for example, the (infinite) M\"obius strip $M$.
Locally $M$ is just $S^1\times \R$, but globally there is some kind of un-productlike twisting. Those familiar with vector bundles
may have found the M\"obius strip a good example to keep in mind - in fact, as we shall show shortly, $M$ can also be
treated as a principal bundle. 

Before we move on to some examples of principal bundles, let us prove the following useful lemma.

\begin{lem}
    $G$ acts freely on $P$.
\end{lem}
\begin{proof}
    Let us compute the stabilizer of some $p\in P$ where $\phi(p)=(x,g)$.
    In coordinates, the requirement that $h\in\Stab_p$ is
    $\phi(p\cdot h)=(x,gh)=(x,g)=\phi(p).$
    This, of course, implies that $h=e$.
\end{proof}

To be more explicit, let us now consider some examples, a few of which will become important later on.\todo{be careful about smooth actions}\todo{add more examples}

\begin{exmp}
    The obvious example of a principal bundle is a bundle that is globally just a product. In other words, given
    a Lie group $G$ and a smooth manifold $X$, we can construct the \textbf{trivial $G$-bundle over $X$} to be
    $G\to X\times G\overset{\pi}{\to} X$ where $\pi$ is simply the projection onto the first factor and $X\times G$ is treated as
    a $G$-space under the action $(x,g)\cdot h=(x,gh)$. 
\end{exmp}

\begin{exmp}
    The reader familiar with projective spaces will recall that the sphere $S^n$ is a double cover of the real projective space $\RP^n$.
    Thus we may consider the natural action of $O(1)=\Z_2=\left\{ 1,-1 \right\}$ (given the discrete topology) on $S^n$ identifying antipodal points,
    i.e. for any $p\in S^n$,
    \[p\cdot (\pm 1)=(x^1,\ldots, x^{n+1})\cdot (\pm 1)=\pm (x^1,\ldots,x^{n+1}).\]
    We can thus construct the principal bundle $O(1)\to S^{n+1}\overset{\pi}{\to} \RP^{n+1}$. Let us check that the required properties are satisfied.
    First note that $O(1)$ does indeed act trivially on the base space, as multiplication by a scalar preserves, by construction, points in $\RP^{n+1}$.
    Next let us construct local trivializations, i.e. $O(1)$-equivariant diffeomorphisms $\phi_\alpha:\pi^{-1}(U_\alpha)\to U_\alpha\times G$ where
    $U_\alpha$ for $\alpha\in\{1,\ldots, n+1\}$ are the usual charts on $\RP^n$ given by the non-vanishing of the $\alpha$th homogeneous coordinate.
    If we now consider the graphical charts for the sphere given by 
    \begin{align*}
        V_\beta^+&=\left\{ (x^1,\ldots,x^{n+1})\in S^n\mid x^\beta>0 \right\}\\
        V_\beta^-&=\left\{ (x^1,\ldots,x^{n+1})\in S^n\mid x^\beta<0 \right\},
    \end{align*}
    we see that
    \[\pi^{-1}(U_\alpha)=V_\alpha^+\cup V_\alpha^-.\]
    Hence we define the map $\phi_\alpha:\pi^{-1}(U_\alpha)\to U_\alpha\times O(1)$ as
    \[\phi_\alpha\left( (x^1,\ldots,x^{n+1}) \right)=\left( [x^1:\ldots:x^{n+1}], \sgn x^{\alpha} \right).\]
    Note first that $\phi_\alpha$ is indeed equivariant,
    \[\phi_\alpha(x\cdot \pm 1)=\phi_\alpha(\pm x)=([x],\sgn \pm x^\alpha)=([x],\pm \sgn x^\alpha)=\phi_\alpha(x)\cdot (\pm 1),\]
    and smooth as the first component is simply a smooth projection and the second component is constant and hence smooth in the disjoint $V_\beta^+$
    and $V_\beta^-$ each. Moreover, $\phi_\alpha$ has an inverse given simply by treating a point in projective space as a point in the sphere
    and multiplying by the given sign. This is certainly smooth - hence $\phi_\alpha$ is indeed a local trivializtion, and $S^n$ forms a principal
    $O(1)$-bundle over $\RP^n$.

    We leave it as an exercise at the end of the chapter to construct similar bundles over the complex and quaternionic projective spaces $\CP^n$ and $\HH\Proj^n$.
\end{exmp}

\begin{exmp}
    Let $G$ be a Lie group, with $H$ a closed subgroup. Let us show that $G$ is a principal $H$-bundle over the coset space $G/H$.
    Let us treat $G$ and $G/H$ as right $H$-spaces with the obvious right-multiplication. Then the action of $H$ on $G/H$ is trivial:
    \[gH\cdot h = gH\]
    for all $g\in G$ and $h\in H$. Showing local triviality is a little trickier. The interested reader may find a proof in \todo{Brocker-Dieck, thm 4.3}.
\end{exmp}

\begin{exmp}
    Let $E\to X$ be a real vector bundle of rank $k$ over a smooth $n$-dimensional manifold $X$.
    Define a \textbf{frame} at a point $x\in X$, to be an ordered basis $f=(f_1,\ldots, f_k)$ for the fiber $E_x$ above $x$. Denote the set of such frames by $F_x$.
    Consider now the set $F(E)=\coprod_{x\in X} F_x$, known as the \textbf{frame bundle associated to $E$}. We claim that $F(E)$ is a principal
    $\GL_k$-bundle over $X$, with the projection map given by $\pi(f)=x$ for $f\in F_x$.

    Leaving aside issues concerning the smooth structure of $F(E)$ for a moment, let us instead begin by defining the action of $\GL_k$ on $F(E)$:
    intuitively, the set of bases of $E_x$ comes equipped with a natural action of $\GL_k$.
    Hence, for $f\in F(E), g\in\GL_k$, we define via the usual matrix multiplication,
    \[(f\cdot g)_i=\sum_{j=1}^kg_{ij}f_j.\]
    Note that this action takes
    frames at $x$ to frames at $x$ since $\pi(f\cdot g)=\pi(f)$, thus rendering the action trivial on $X$ (and making $\pi$ equivariant). Next, in order to construct
    local trivializations for $F(E)$, (again modulo smoothness) we must construct bijections $\phi_\alpha:\pi^{-1}(U_\alpha)\to U_\alpha\times\GL_k$,
    where $\{U_\alpha\}$ is an open cover of $X$. Fixing a frame $e_x\in E_x$ at each $x\in U_\alpha$, we define, for $f_x\in F_x=\pi^{-1}(x)$
    \[\phi_\alpha(f_x)=(x, g_x),\]
    where $g_x\in\GL_k$ satisfies $f=e_x\cdot g_x$. In other words, we've fixed a `reference' or `identity' frame in each fiber, and are parameterizing
    frames $f$ by the element in $\GL_k$ that takes the reference frame to $f$ (and $x$, of course). Thus defined, $\phi_\alpha$ commutes with the
    necessary projection maps and is a bijection (this follows by linear algebra: given one frame at $x$, one can reach any other frame at $x$ uniquely. Indeed,
    the action of $\GL_k$ on $F_x$ is free and transitive, though the lack of a preferred frame renders the bijection non-canonical).
    Furthermore, $\phi_\alpha$ is equivariant with respect to the natural right $\GL_k$-action defined on $U_\alpha\times\GL_k$.

    It now remains to equip $F(E)$ with a smooth structure such that $\pi$ is smooth, the action of $\GL_k$ is smooth, and $\phi_\alpha$ are
    diffeomorphisms. To do this, we use as charts $U_\alpha\times V_i$ where $U_\alpha$ are the charts of $X$ and $V_i$ are the usual $k^2$
    charts associated to $\GL_k$. We then have coordinates $\psi:F(E)\to\R^{n+k^2}$ given by $\psi(p)=(x_i,g_{ij})$, where $x=\pi(p)$ and $g$
    is defined as in the trivialization above. Then $\pi$ is a smooth projection and the right action of $\GL_k$ is smooth. Finally, it is easily
    verified that both $\phi_\alpha$ and $\phi_\alpha^{-1}$ are smooth; this concludes the proof that $F(E)$ is a principal $\GL_k$-bundle. In the
    case of $E$ a Riemannian vector bundle (e.g. the tangent bundle of a Riemannian manifold) we may also consider the frame bundles
    $OF(E)$ and $SOF(E)$ as the orthogonal and oriented orthogonal frame bundles, respectively.
    
    %To see why $F_x$ should have the structure of $\GL_k$, note first that a frame $f=(e_1,\ldots,e_k)\in F_x$
    %can be viewed as a linear isomorphism $f_x:\R^k\to E_x$ given by $f(a^1,\ldots, a^k)=a^1e_1+\cdots a^ke_k$. Then $F_x$ is naturally
    %equipped with a right-action of $\GL_k$ given by composition: $f\cdot g=f\circ g:\R^k\to E_x$. As is well-known from linear algebra,
    %there is a unique linear transformation sending one basis to any other, and hence this right-action is both free and transitive.
    %
    %To see this, note first that $\GL_k\R$ acts transitively 
    %and freely on the set of frames at $x$ (the us) on each $F_x$, giving $F_x$ the structure of $\GL_k$.

    %%choosing a frame for $E_x$ is equivalent to choosing a linear isomorphism from $\R^k$ to $\pi^{-1}(x)$, i.e. choosing an
    %element of $\GL(k)$ that takes the usual orthonormal basis of $\R^k$ to the chosen frame.
    %Of course, $F_x$ is equipped with a natural right action by
    %$\GL(k)$ (given by right-multiplication), which is free and transitive. In this sense, the set of frames $F_x$ is, when viewed as a Lie group, diffeomorphic to $\GL(k)$.
    %\todo{finish frame bundles, see DuPont}
\end{exmp}

Now that we have worked through a few concrete examples of principal bundles, it should be clear that non-trivial bundles are precisely that: non-trivial.
With this in mind, one might ask exactly how a
given bundle fails to be trivial. This can be done via \textbf{transition functions}, in analogy to those used in defining smooth manifolds.
In particular, we investigate how the local coordinates of a point in a principal bundle depend on the choice of local trivialization (assuming, of
course, that the point is in a region of overlap $U_\alpha\cap U_\beta$).

\begin{defn}
    Let $P$ be a principal $G$-bundle over $X$ with local trivializations $\Psi_\alpha$ defined over an open cover $X=\{U_\alpha\}$.
    Fix $\alpha,\beta$ such that $U_\alpha\cap U_\beta$ is non-empty. 
    On the overlap, consider
    \[\Psi_\beta\circ\Psi_\alpha^{-1}:(U_\alpha\cap U_\beta)\times G\to (U_\alpha\cap U_\beta)\times G,\]
    which takes, say,
    \[(\Psi_\beta\circ\Psi_\alpha^{-1})(x,g)=(x,h)\]
    for some $x\in X$ and $g,h\in G$. As $\Psi_\beta\circ\Psi_\alpha$ is a diffeomorphism, $h$ must depend smoothly on $g$,
    and hence we may write
    \[(\Psi_\beta\circ\Psi_\alpha^{-1})(x,g)=(x,g_{\beta\alpha}(x)h),\]
    where $g_{\beta\alpha}$ is a smooth map $U_\alpha\cap U_\beta\to G$ called the \textbf{transition function} $g_{\beta\alpha}$. 
    It should be clear that these transition functions satisfy the so-called \textbf{cocycle condition}:
    \[g_{\alpha\beta}(x)\cdot g_{\beta\gamma}(x)=g_{\alpha\gamma}(x),\]
    for all $\alpha,\beta,\gamma$, with $x\in U_\alpha\cap U_\beta\cap U_\gamma$.
\end{defn}

Though perhaps not evident at first, these transition functions (defined over some open cover of the base manifold) hold enough
information to recreate the principal bundle in its entirety. Intuitively, this is because the bundle can be thought of
as a set of local products $U_\alpha\times G$ that is glued together in a non-trivial way via the transition functions in order to
form the global structure of the bundle. We leave this as an exercise that the reader is urged to carry out (see \hyperref[exc:bundleconst]{Exercise \ref*{exc:bundleconst}}).
\todo{maybe do this out}

\section{Morphisms and sections}\todo{expand on this section}

We may define morphisms between princpal $G$-bundles, thus defining the category of principal $G$-bundles.
\begin{defn}
    Let $G\overset{\pi_1}{\to}P_1\to X_1$ and $G\overset{\pi_2}{\to}P_2\to X_2$ be two principal $G$-bundles. We define a \textbf{bundle
    map} between $P_1$ and $P_2$ to be a smooth $G$-equivariant map $\Phi:P_1\to P_2$:
    \[\Phi(p\cdot g)=\Phi(p)\cdot g,\]
    for all $p\in P_1, g\in G$, with the group action on both $P_1,P_2$ denoted by `$\cdot$'. Note that bundle maps preserve fibers.
\end{defn}

We will be concerned primarily with maps between bundles with the same base space. This is quite a special case, as the following theorem shows.
\begin{thm}
    A bundle map $f$ between two principal $G$-bundles $P_1$ and $P_2$ over the same base $X$ is an isomorphism.
\end{thm}
\begin{proof}
    Let us first suppose that $P_1,P_2$ are both trivial, i.e. $P_1=P_2=X\times G$. Then, since $f$ must preserve fibers, we see that
    \[f(x,g)=(x,\sigma(x)g)\]
    for some function $\sigma:X\to G$.
    \todo{finish}
\end{proof}
Indeed, this result suggests how strong the condition of being a principal bundle is.


% Bundle maps

Just as with vector bundle, we can construct ``sections'' of a principal bundle, i.e. globally twisted functions on our base manifold.

\begin{defn}
    Let $G\to P\overset{\pi}{\to} X$ be a principal $G$-bundle and $U$ be an open neighborhood of $X$. A \textbf{local section} (sometimes \textbf{cross-section}) of $\pi$ is a continuous map $\sigma: U\to P$ such that $\pi(\sigma(x))$. If $U=X$, we say that $\sigma$ is a \textbf{global section}.
\end{defn}

\begin{exmp}
    Given a local trivialization $\Psi:\pi^{-1}(U)\to U\times G$, we can define a local section $\sigma:U\to P$ as $\sigma(x)=\Psi^{-1}(x,e)$. In words, we simply take the identity section in our local trivialization (that assigns to each point $x$ on the manifold the identity element in the copy of $G$ above $x$) and then pull it back onto the bundle. As the section is continuous in the local trivialization and because $\Psi$ is continuous and takes fiber to fiber, we see that $\sigma$ is indeed a local section. We will refer to this section as the \textbf{canonical section} associated to the trivialization $\Psi$.
\end{exmp}

\begin{thm}
    A principal bundle $G\to P\overset{\pi}{\to} X$ is trivial iff it has a global section.
\end{thm}
\begin{proof}
    Let $\sigma:X\to P$ be a global section. Consider now the trivial bundle $G\to X\times G\overset{\rho}{\to}X$; it suffices to find a bundle map $\Theta: X\times G\to P$ making the diagram 
    \begin{equation*}
        \begin{tikzcd}
            X\times G\arrow{rr}{\Theta}\arrow[swap]{rd}{\rho}&&P\arrow[bend left]{ld}{\pi}\\
            &X\arrow[bend left]{ru}{\sigma}&
        \end{tikzcd}
    \end{equation*}
    commute. Define the map $\Theta:X\times G\to P$ by
    \[\Theta(x,g)=\sigma(x)\cdot g.\]
    This map clearly takes fiber to fiber and is $G$-equivariant, as
    \[\Theta(x,gh)=\sigma(x)\cdot (gh)=(\sigma(x)\cdot g)\cdot g.\]
    Hence $\Theta$ defines a bundle equivalence between $X\times G$ and $P$, and we are done. Intuitively, one thinks of the given global
    section $\sigma$ as a (non-canonical) choice of a reference ``identity'' section.

    Conversely, suppose $P\cong X\times G$. We can easily construct the global identity section $\sigma: X\to X\times G$ given by $\sigma(x)=(x,e)$.
\end{proof}

\section{Pullback bundles}

\section{Associated bundles}

Throughout this section, we fix a principal bundle $G\to P\xrightarrow{\pi}X$, as well as a 
left $G$-space $F$. \todo{motivation?}\todo{cite Naber}

\begin{defn}
Consider the product manifold $P\times F$ as a right $G$-space, with a joint action defined as follows:
\[(p,v)\cdot g\equiv(p\cdot g, \rho(g^{-1})\cdot y),\]
for $p\in P,y\in V$, and $g\in G$. We define the \textbf{fiber bundle associated to $P$ with fiber $F$} to be the orbit space
\[P\times_G F\equiv (P\times F)/G,\]
i.e. the quotient of the product $P\times F$ by the action defined above. The following lemma
justifies the name.
\end{defn}

\begin{lem}
    The fiber bundle associated to $P$ as above forms a smooth, locally trivial bundle with base space $X$ and fiber $F$
    written as $F\to P\times_GF\xrightarrow{\mu}X$. This structure is unique\todo{why?}.
\end{lem}
\begin{proof}
    Concretely, we may write the points of the quotient $P\times_G F$ as equivalence classes $[p,y]$ under the relation
    \[[p,y]=[p\cdot g,g^{-1}\cdot y].\]
    If we denote by $q:P\times F\to P\times_G F$ the quotient map given by
    \[q(p,y)=[p,y],\]
    we can give $P\times_G F$ the induced quotient topology. Furthermore, we can define $\mu:P\times_G F\to X$ by
    \[\mu([p,y])=[\pi(p)],\]
    which is well-defined: $\mu([p\cdot g,g^{-1}\cdot y])=\pi(p\cdot g)=\pi(p)$. Finally, defining
    $\pi_P:P\times F\to P$ to be the obvious projection, we find that the diagram
    \begin{equation*}
        \begin{tikzcd}
            P\times F\arrow{r}{q}\arrow{d}{\pi_P}&P\times_\rho F\arrow{d}{\mu}\\
            P\arrow{r}{\pi}&X
        \end{tikzcd}
    \end{equation*}
    commutes, implying that $\mu$ is in fact a continuous map (characteristic property of quotients).
    
    Let us now construct the necessary local trivializations for $P\times_G F$.
    Fix an open set $U$ in $X$. Associated to $U$ we have a local trivialization of $P$
    given by $\Psi:\pi^{-1}(U)\to U\times G$:
    \[\Psi(p)=(\pi(p),\psi(p)),\]
    where $\psi(p\cdot g)=\psi(p)g$ is the projection onto the group component for all $p\in\pi^{-1}(U)$ and $g\in G$.
    If we denote by $s:U\to\pi^{-1}(U)$ the canonical section $s(x)=\Psi^{-1}(x,e)$, we can construct a map
    $\tilde\Phi:U\times F\to\mu^{-1}(U)$ by
    \[\tilde\Phi(x,y)=[s(x),y].\]
    For $\tilde\Phi$ to be a local trivialization it must first be a homeomorphism. It is clearly continuous - it
    suffices to show that it is bijective with continuous inverse.
    Note first that for any $x\in X$ with $p\in\pi^{-1}(x)$,
    the preimage $\pi_P^{-1}(p)$ is sent by $q$ to elements of the form $[p,y]$ for some $y\in F$ and hence
    $\mu^{-1}(x)=\left\{ [p,y]\mid y\in F \right\}$. 
    Thus we can write
    \begin{align*}
        \mu^{-1}(U)&=\bigcup_{x\in U}\mu^{-1}(x)\\
        &=\bigcup_{x\in U}\left\{ [p,y]\mid \pi(p)=x,y\in F \right\}\\
        &=q(\pi^{-1}(U)\times F).
    \end{align*}
    We first show that $\tilde\Phi$ is surjective. Fix $[p,y]\in \mu^{-1}(U)$ for $p\in P, y\in F$
    and let $\pi(p)=x=\pi(s(x))$. As there exists some $g\in G$ for which $p=s(x)\cdot g$ it follows that
    \[\tilde\Phi(x,g\cdot y)=[s(x),g\cdot y]=[s(x)\cdot g,(g^{-1}g)\cdot y]=[p,y].\]
    Next, we show injectivity. Suppose $\tilde\Phi(x,y)=\tilde\Phi(x',y')$. Then, by definition of $\tilde\Phi$,
    we must have that $[s(x),y]=[s(x'),y']$, and in particular, that $\pi(s(x))=\pi(s(x'))\implies x=x'$.
    Consequently, $[s(x),y]=[s(x),y']$, i.e. there exists some $g\in G$ such that $s(x)\cdot g=s(x)$
    and $y'=g^{-1}\cdot y$. The action of $G$ on a fiber of $P$ is free, and hence $g=e$, implying that
    $y=y'$. Thus $\tilde\Phi$ is bijective with inverse is given by
    \[\tilde\Psi([p,y])=(\pi(p), g\cdot y),\]
    where $p=s(\pi(p))\cdot g$ (check this!). Using the characteristic property of quotient maps, $\tilde\Psi$
    is continuous because the map $\tilde\Psi\circ q:q^{-1}(\mu^{-1}(U))=\pi^{-1}(U)\times F\to U\times F$ given
    by $(p,y)\to(\pi(p),g\cdot y)$ is continuous.

    Note that $\mu(\tilde\Phi(x,y))=\mu([s(x),y])=\pi(s(x))=x$ and hence $\tilde\Phi$ is (the inverse of) a local trivialization
    for the bundle $F\to P\times_GF\xrightarrow{\mu}X$ (we leave it as an exercise to show that $P\times_GF$
    is Hausdorff\todo{exercise: Naber 1.3.23}). It now suffices to construct a differentiable structure on $P\times_GF$
    in respect to which $\mu$ is smooth and the maps $\tilde\Psi_\alpha:\mu^{-1}(U_\alpha)\to U_\alpha\times F$
    are diffeomorphisms for an open cover $X=\left\{ U_\alpha \right\}$. Consider first two local trivializations
    $\Psi_\alpha,\Psi_\beta$ (with $U_\alpha\cap U_\beta$ non-empty) for $P$ with let $s_\alpha,s_\beta$ the
    corresponding canonical local sections and $g_{\beta\alpha}:U_\alpha\cap U_\beta\to G$ the transition function.
    By the above procedure, we obtain the homeomorphisms $\tilde\Psi_\alpha:\mu^{-1}(U_\alpha)\to U_\alpha\times F$
    and $\tilde\Psi_\beta:\mu^{-1}(U_\beta)\to U_\beta\times F$. Consider now the map
    \[\tilde\Psi_\beta\circ\tilde\Psi_\alpha^{-1}:(U_\alpha\cap U_\beta)\times F\to(U_\alpha\cap U_\beta)\times F,\]
    which, for $(x,y)\in(U_\alpha\cap U_\beta)\times F$, takes
    \begin{align*}
        \tilde\Psi_\beta\circ\tilde\Psi_\alpha^{-1}(x,y)&=\tilde\Psi_\beta\left( \tilde\Phi_\alpha(x,y) \right)\\
        &=\tilde\Psi_\beta([s_\alpha(x),y])=\tilde\Psi_\beta([s_\beta(x)\cdot g_{\beta\alpha}(x),y])\\
        &=\tilde\Psi_\beta([s_\beta(x)\cdot g_{\beta\alpha}(x),g_{\beta\alpha}^{-1}(x)\cdot(g_{\beta\alpha}(x)\cdot y)])\\
        &=\tilde\Psi_\beta([s_\beta(x),g_{\beta\alpha}(x)\cdot y])\\
        &=(x,g_{\beta\alpha}(x),y).
    \end{align*}
    This computation shows that $\tilde\Psi_\beta\circ\tilde\Psi_\alpha^{-1}$ is in fact a diffeomorphism, as it
    is smooth and clearly has a smooth inverse.
    %Note additionally that since $\left\{ U_\alpha \right\}$ is an open
    %cover for $X$, $\left\{ \mu^{-1}(U_\alpha) \right\}$ is an open cover for $P\times_GF$. We can now define a smooth
    %structure on $P\times_GF$ by taking $(\mu^{-1}(U_\alpha),\tilde\Psi_\alpha)$ as the charts (which are smoothly
    %compatible by the above calculation).
    \todo{finish; see Lee lem 10.6}
\end{proof}

\section{References}
\section{Exercises}

\begin{exc}
    \label{exc:bundleconst}
    Let $X$ be a smooth manifold and let $\left\{ U_\alpha \right\}$ be an open cover of $X$. Suppose for each
    $\alpha,\beta$ we have smooth smooth transition functions $g_{\alpha\beta}:U_\alpha\cap U\beta\to G$ that
    satisfy the cocycle condition. Show that there is a smooth principal $G$-bundle $P\xrightarrow{\pi} X$ with smooth local
    trivializations $\Psi_\alpha:\pi^{-1}(U_\alpha)\to U_\alpha\times G$ whose transition functions are the given maps
    $g_{\alpha\beta}$. (Hint: show that the transition functions give an equivalence relation on the disjoint union
    $\coprod U_\alpha\times G$ and that quotienting by this relation yields a principal bundle.)
\end{exc}



\chapter{Connections and Curvature}

\section{Basic definitions}

It is intuitive to think of a principal bundle as having ``vertical''  and ``horizontal'' components, namely the directions along the fiber and the base manifold,
respectively. The theory of connections and curvature that we detail below formalizes these notions. Though their basic idea may seem rather
innocuous, connections as we shall see are surprisingly sophisticated and have a large number of important applications. \todo{put in applications}

Before we discuss connections, however, we will define a few preliminary concepts that the reader may find familiar from Lie theory.
We shall omit the proofs of some of the statements below. For a more thorough treatment, we suggest \todo{Lee}.

\begin{defn}
    Let $G$ be a Lie group. Define the left and right-translation maps as
    \[
        \begin{array}{ccc}
            L_g(h)=gh & \text{and} & R_g(h)=hg.
        \end{array}
    \]
    Both of these maps are diffeomorphisms (multiplication and inversion are smooth) and hence the pushforwards $(L_g)_*$ and $(R_g)_*$
    acting on smooth vector fields are vector space isomorphisms. We say that a vector field $X\in\Gamma(TG)$ is \textbf{left} or \textbf{right-invariant} if
    \[
        \begin{array}{ccc}
            (L_g)_*X|_h=X|_{gh} & \text{or} & (R_g)_*X|_h=X|_{hg},
        \end{array}
    \]
    respectively, for all $g,h\in G$.
    Similarly, we say that a one-form $\omega\in\Gamma(T^*G)$ is \textbf{left} or \textbf{right-invariant} if\todo{is this correct?}
    \[
        \begin{array}{ccc}
            \omega(g)=\left( L_{hg^{-1}} \right)^*\omega(h) & \text{or} & \omega(g)=\left( R_{g^{-1}h} \right)^*\omega(h),
        \end{array}
    \]
    respectively, for all $g,h\in G$.
    %Invariance for one-forms is a little harder to visualize than for vectors fields, so let us justify
    %this definition. Evaluating $\omega$ on a vector $v\in T_gG$,
    %\begin{align*}
    %    \omega(g)(v)=\left( (L_{hg^{-1}})^*\omega(h) \right)(v)=\omega(h)\left( (L_{hg^{-1}})_*v \right)
    %\end{align*}
\end{defn}

\begin{lem}
    Let $G$ be a Lie group and $X,Y$ be left-invariant vector fields on $G$. Then their Lie bracket $[X,Y]$ is also left-invariant.
\end{lem}
\begin{proof}
    This follows straightforwardly from the naturality of the Lie bracket.\todo{refer to Lee, or do this proof}
\end{proof}

\begin{thm}
    The space of left-invariant vector fields of a Lie group $G$ forms a Lie algebra, and is in fact isomorphic (as a Lie algebra) to the Lie algebra
    $\Lie G=\fr g$ of $G$.
\end{thm}
\begin{proof}
    Omitted.\todo{make this into an exercise in the back}
\end{proof}

\todo{Adjoint and adjoint actions}

\begin{defn}
    \label{defn:conn}
    Let $P$ be a principal $G$-bundle over $M$. Let $p\in P$ be a point in the fiber above $x\in M$. Let $T_pP$ denote the tangent space to $P$ to $p$
    and denote by $V_p$ the tangent space to the fiber $\pi^{-1}(x)$ treated as a subspace of $T_pP$. We call $V_p$ the \textbf{vertical subspace} of
    $T_pP$. A \textbf{connection} $\Gamma$ on $P$ is an assignment of a \textbf{horizontal subspace} $H_p$ to each $p\in P$ such that
    \begin{enumerate}[(i)]
        \item there is a direct sum decomposition $T_pP=V_p\oplus H_p;$
        \item $H_p$ depends smoothly on $p$, as defined below.
        \item $H_{pg}=(R_g)_*H_p$ for every $g\in G$;
    \end{enumerate}
    A tangent vector $X\in T_pP$ is called \textbf{vertical} (resp. \textbf{horizontal}) if it lies in $V_p$ (resp. $H_p$). By 
    $(i)$ we see that any vector can uniquely be decomposed into vertical and horizontal components: $X=X_v+X_h$ with
    $X_v\in V_p$ and $X_h\in H_p$. This definition extends naturally to the idea of vertical and horizontal vector fields.
    Indeed, by saying that $H_p$ depends smoothly on $p$ in $(ii)$, we mean that for any smooth vector field $X\in \Gamma(TP)$, the vertical
    and horizontal components $X_v$ and $X_h$ are smooth as well. Finally, $(iii)$ requires that the choice of horizontal subspace is equivariant along the fiber direction.
\end{defn}

The above definition of a connection is reasonable, as given a vector space without an inner product defined on it, there is no canonical choice
of a horizontal subspace given an arbitrary vertical subspace. If, by chance, we are given a Riemannian metric $\eta$ on $P$, we may choose the horizontal
subspaces according to the orthogonal complement given by $\eta$. Hence the choice of metric induces a choice of connection.
We will return to this case later, for now working in full generality.

Unfortunately, thinking of a connection as a choice of horizontal subspaces,
while intuitive, is rather difficult to compute with. Hence we provide an alternate definition in terms of Lie algebra-valued one-forms, and we
prove that the two definitions are equivalent. Before we do so, let us familiarize ourselves a little bit with vector-valued forms.

\begin{defn}
    Let $V$ be a $d$-dimensional vector space and $M$ a smooth manifold. Denote by $E=M\times V$ the trivial bundle over $M$ and by $\Lambda^pT^*M$ the
    $p$th exterior power of the cotangent bundle of $M$.
    We define a \textbf{$V$-valued $p$-form} on $M$ to be a section of the tensor product bundle of $\Lambda^pT^*M$ and $E$.
    More explicitly, fixing a basis $\left\{ e_1,\ldots,e_d \right\}$ for $V$ (equivalently a global frame for $E$) we can write any $V$-valued $p$ form as:
    \[\mu_x(v_1,\ldots,v_p)=\mu_x^1(v_1,\ldots,v_p)e_1+\ldots+\mu_x^d(v_1,\ldots,v_p)e_d\]
    for all $x\in M$ and $v_i\in T_xM$, where the $\mu^i\in\Gamma(\Lambda^pT^*M)$ are the \textbf{components} of $\mu$. We say that a $V$-valued
    form is smooth if and only if its components are smooth in the usual sense of forms (we leave it as an exercise to the reader to show
    that this definition is independent of basis).\todo{exercise}
    We denote the space of smooth such sections on $M$ by $\Omega^p(M;V).$

    For $p=0$, we define by convention $\Omega^0(M;V)$ to be the space of smooth vector-valued functions on $M$.
    For $p=1$, we get smooth $V$-valued one-forms: if $\mu$ is such a form then for $x\in M$, $\mu_x$
    is a linear transformation from $T_xM$ to $V$, i.e. $\mu_x\in\Hom(T_xM;V).$ In this sense, ordinary one-forms on $M$
    may be seen as $\R$-valued one-forms.
\end{defn}

Just as with usual forms, we may pullback vector-valued forms.
\begin{defn}
    Let $M,N$ be smooth manifolds and $f:M\to N$ a smooth map. If $\mu$ is a $V$-valued $p$-form on $N$ we define the \textbf{pullback of $\mu$ by $f$}
    to be the $V$-valued $p$-form $f^*\mu$ on $M$ defined by
    \[(f^*\mu)_x(v_1,\ldots,v_p)=\mu_{f(x)}(f_*v_1,\ldots,f_*v_p)\]
    with $v_i\in T_xM$, for all $x\in M$. Note that if $\mu=\mu^ie_i$ then\todo{prove this} $f^*\mu=(f^*\mu^i)e_i$; hence if $\mu$ is smooth, so is $f^*\mu$.
\end{defn}

We now introduce the Maurer-Cartan form, a Lie algebra-valued form on a Lie group, which will be useful for redefining connections on principal bundles.
\begin{defn}
    The \textbf{Maurer-Cartan form} $\mu$ on a Lie group $G$ is the unique Lie algebra-valued one-form $\mu \in \Omega^1(G; \fr g)$
    that is left-invariant and acts as the identity map on $T_eG$. Uniqueness is clear: if two such forms exist they agree, by definiton, at
    the identity; subsequently, left-invariance forces the two forms to agree everywhere. We can in fact write out the action of $\mu$
    completely explicitly using just the definition. For some $v\in T_gG$,
    \[\mu(g)(v)=\left( (L_{g^{-1}})^*\mu(e) \right)(v)=(L_{g^{-1}})_{*g}(v).\]
\end{defn}

The following lemma relates a given basis of the Lie algebra to the Maurer-Cartan form.
\begin{lem}
    \label{LMC}
    Fix a basis $\{e^i\}$ for $\fr g=T_eG$ and hence a dual basis $\left\{ \mu^i(e) \right\}$ for $\fr g^*=T_e^*G$.
    By construction, $\mu^i(e)(e_j)=\delta^i_j$. If we denote by $\mu^i$ the left-invariant vector fields generated by $\mu^i(e)$, then 
    the Maurer-Cartan form is written
    \[\mu(g)=\sum_i\mu^i(g)e_i.\]
\end{lem}
\begin{proof}
    Let us start with the right-hand side of the identity and show that it evaluates everywhere to the left-hand side.
    Take any $v\in T_gG$ and denote by $w$ the pushforward $(L_{g^{-1}})_*v$. Then
    \begin{align*}
        \left(\sum_i\mu^ie_i\right)(v)&=\sum_i\mu^i(g)(v)e_i=\sum_i\left((L_{g^{-1}})^*\mu^i(e)\right)(v)e_i\\
        &=\sum_i \mu^i(e)(w)e_i=\sum_i\mu^i(e)( \sum_j w^j e_j )\\
        &=\sum_{i,j}w_j\mu^i(e)(e_j)e_i=\sum_iw^ie_i=w\\
        &=(L_{g^{-1}})_{*}v=\mu(g)(v),
    \end{align*}
    as desired.
\end{proof}

\begin{exmp}
    We now follow [Naber] in computing the Maurer-Cartan form $\mu$ for $G=\GL_n\R$ as an example. 

    We denote by $x^{ij}$ the coordinate functions of $\R^{n^2}$ such that $x^{ij}(g)=g^{ij}$ for $g\in\GL_n\R$. Recall that $\fr{gl}_n\R$ is the space of
    all $n\times n$ matrices. Fix a basis for $\fr {gl}_n\R$ to be $\left\{ \partial/\partial x^{ij}|_{e} \right\}_{i,j=1,\ldots n}$.
    The corresponding dual basis is $\left\{ dx^{ij}(e) \right\}_{i,j=1,\ldots n}$; to find (the components of) $\mu$, we wish to
    find left-invariant $\R$-valued one-forms $\mu^{ij}$ satisfying $\mu^{ij}(e)=dx^{ij}(e)$. Recall that left-invariance of $\mu^{ij}$ requires that
    $\mu^{ij}(g)=\left( L_{g^{-1}} \right)^*(\mu^{ij}(e))$. Let $v\in T_g\GL_n\R$ be the tangent vector to a curve $\gamma:(-\varepsilon,\varepsilon)\to\GL_n\R$,
    i.e. $\gamma'(0)=v$. Then we have
    \begin{align*}
        \mu^{ij}(g)(v)&=\mu^{ij}(e)\left( (L_{g^{-1}})_*v \right)=dx^{ij}(e)\left( (L_{g^{-1}})_*v \right)\\
        &=dx^{ij}(e)\left( (L_{g^{-1}}\circ\gamma)'(0) \right)=dx^{ij}(e)\left(\frac{d}{dt}\bigg|_{t=0}(g^{-1}\gamma(t))  \right)\\
        &=\sum_k\left(g^{-1}\right)^{ik}v^{kj}
    \end{align*}
    Rewriting this as
    \begin{align*}
        \mu^{ij}(g)(v)=\sum_k\left(g^{-1}\right)^{ik}v^{kj}=\sum_k(g^{-1})^{ik}dx^{kj}(g)(v),
    \end{align*}
    we find that
    \[\mu^{ij}(g)=\sum_k (g^{-1})^{ik}dx^{kj}(g).\]
    Using Lemma \ref{LMC} we conclude
    \[\mu(g)=\sum_{i,j=1}^n\mu^{ij}(g)\frac{\partial}{\partial x^{ij}}\bigg|_{e}=\sum_{i,j,k=1}^nx^{ik}(g^{-1})dx^{kj}(g)\frac{\partial}{\partial x^{ij}}\bigg|_{e}\]
    This is often rather slickly abbreviated as $\mu(g)=g^{-1}dg$. Let us now apply this to the simple case of $\GL_2\R$. Writing
    \[g=\begin{pmatrix}
            a&b\\c&d
        \end{pmatrix}\text{ and }g^{-1}=\frac{1}{ad-bc}\begin{pmatrix}
            d&-b\\-c&a
        \end{pmatrix},
    \]
    we can express the Maurer-Cartan form as
    \begin{align*}
        \mu(g)&=g^{-1}dg=\frac{1}{ad-bc}\begin{pmatrix}
            d&-b\\-c&a
        \end{pmatrix}\begin{pmatrix}
            dx^{11}&dx^{12}\\dx^{21}&dx^{22}
        \end{pmatrix}\\
        &=\frac{1}{ad-bc}\begin{pmatrix}
            d\;dx^{11}-b\;dx^{21}&d\;dx^{12}-b\;dx^{22}\\-c\;dx^{11}+a\;dx^{21}&-c\;dx^{12}+a\;dx^{22}.
        \end{pmatrix}
    \end{align*}
\end{exmp}

\begin{defn}
    Let $G$ be a Lie group and $\fr g$ be its Lie algebra. We say that a $\fr g$-valued one-form $\mu$ is right-equivariant if
    \[(R_g)^*\mu=\Ad(g^{-1})\circ \mu\]
    for all $g\in G$. More generally, let $P$ be a manifold equipped with smooth right action $\sigma(p,g)=p\cdot g$ of $G$ and let $\mu$ be a $\fr g$-valued one-form
    on $P$. Then we say that $\mu$ is \textbf{right-equivariant under $\sigma$} if
    \[(\sigma_g)^*\mu=\Ad(g^{-1})\circ \mu\]
    for all $g\in G$.\todo{change notation to $R_g$}
\end{defn}

\begin{lem}
    The Maurer-Cartan form is right-equivariant.
\end{lem}
\begin{proof}
    Take $g,h\in G$ and a vector $v\in T_{hg^{-1}}G$. It suffices to show right-equivariance for this case:
    \begin{align*}
        \mu(h)\left( (R_g)_*v \right)&=(L_{h^{-1}})_*\left( (R_g)_*v \right)\\
        &=(L_{g^{-1}}\circ L_{gh^{-1}})_*\left( (R_g)_*v \right)\\
        &=(L_{g^{-1}})_*\left( (L_{gh^{-1}}\circ R_g)_*v \right)\\
        &=(L_{g^{-1}})_*\left( (R_g\circ L_{gh^{-1}})_*v\right)\\
        &=\Ad(g^{-1})\circ (L_{gh^{-1}})_*v\\
        &=\Ad(g^{-1})\circ \mu(hg^{-1})(v),
    \end{align*}
    as desired. Note that we have used the covariance of the pushforward together with the fact that the left and right actions
    commute.
\end{proof}

Let us finally return to connections.
\begin{defn}
    Given a connection $\Gamma$ on a principal $G$-bundle $P$ over $M$, we define the corresponding \textbf{connection one-form} $\omega\in \Omega^1(P;\fr g)$
    as follows. Recall that the elements of $\fr g$ are in one-to-one correspondence with left-invariant vector fields on $G$. Given a Lie algebra
    element $X$, denote by $\tilde X$ its corresponding left-invariant vector field. Note that when $\tilde X$ is considered
    as a vector field on $P$ it is a purely vertical vector field. Thus, for some vector $Y\in T_pP$ with vertical component $Y_v$ we define
    $\omega(p)(Y)$ to be the (unique)\todo{why?} Lie algebra element $X$ such that $\tilde X(p)=Y_v$.\todo{smoothness?}
\end{defn}

The next theorem shows us that a connection one-form is in fact enough information to recover the connection, as desired.

\begin{thm}
Let $P$ be a principal $G$-bundle over $M$ with a connection $\Gamma$ and associated connection form $\omega$. Then the connection form satisfies:
\begin{enumerate}[(i)]
\item $\omega(\tilde X)=X$ for all $X\in\fr g$;
\item $(R_g)^*\omega=\Ad(g^{-1})\circ \omega$, i.e. $\omega$ is right-equivariant.
\end{enumerate}

Conversely, given a $\fr g$-valued one-form $\omega$ on $P$ satisfying $(i)$ and $(ii)$,
there is a unique connection $\Gamma$ on $P$ whose connection form is $\omega$.
\end{thm}
\begin{proof}
\todo{Understand this}The first property follows straight from the definition of the connection form above.
We show the second property in cases; in particular, we show that the left and right-hand sides are equal when evaluated on a vector field $X$ that is either horizontal or vertical (as defined by $\Gamma$).
In the case where $X=X_h$ is horizontal, we note that the right-hand side is zero simply by definition of the connection form.
On the left-hand side we also obtain zero, as $((R_g)^*\omega)(X)$ must be horizontal as well, by condition (iii) in the definition of $\Gamma$.
Now suppose $X=X_v$ is vertical with respect to $\Gamma$. Then $X=\tilde Y$ for some $Y\in\fr g$, i.e. $X$ is the fundamental vector field associated to $Y$.
Then $(R_g)_*X$ is the fundamental vector field corresponding to $\Ad(g^{-1})Y$.
 Hence we see that
\[(R_g^*\omega)_p(X)=\omega_{pg}((R_g)_*X)=\Ad(g^{-1})Y=\Ad(g^{-1})(\omega_p(X)),\]
as desired.

Conversely, given a form $\omega$ satisfying these two properties, we define
\[H_p=\{X\in T_pP\mid \omega(X)=0\}.\]
It now suffices to show that this choice of horizontal subspace for each $p\in P$ satisfies conditions (i)-(iii) of the connection.
It is clear that by defining $H_p$ as above we obtain a direct sum decomposition $T_pP=V_p\oplus H_p$ (as $\omega(p)$ maps onto $\fr g$). Right equivariance of the subspaces follows easily: take $X\in H_p$. Then
\begin{align*}
\omega(p\cdot g)((R_g)_*X)&=\omega((R_g)_*X)\\
&=\Ad(g^{-1})\circ\omega(X)\\
&=0,
\end{align*}
so $(R_g)_*X\in H_{p\cdot g}$. But by the injectivity of $(R_g)_*$ and the fact that $\dim H_p=\dim H_{p\cdot g}$, we find that $H_{p\cdot g}=(R_g)_*H_p$.
To show that this choice of horizontal subspaces varies smoothly over $P$ we must show that for any smooth vector field $X$ on $P$, the horizontal component vector field $X_h$ is smooth as well. But note that we can write, at any point $p\in P$:
\begin{align*}
X_h|_p&=X|_p-X_v|_p\\
&=X|_p-\widetilde{\omega_p(X)}|_p.
\end{align*}
Here we have found the vertical component $X_v$ by using the definition of the connection one-form.
Of course, $\omega$ is smoot so the map $X\mapsto \omega_p(X)$ is smooth, and since the tilde operation is an isomorphism, the map $X\mapsto \widetilde{\omega_p(X)}$ is smooth as well, and we are done.
\end{proof}






\section{The BPST connection: a first example}
Now that we introduced connections, we work through a particularly important connection 1-form on the quaternionic Hopf bundle, $Sp(1) \to S^7 \to S^4$. We will see later that this connection will give the gauge fields associated to the physical notion of isotopic spin. A family of solutions to the Yang-Mills equations for this problem is the BPST instanton solutions, hence the name ``BPST connection'' for the connection we are describing in this section. In order to perform this computation, we regard $S^7$ as unit length elements of $\HH^2$, and we denote the inclusion map by $i : S^7 \to \HH^2$. We start by defining an $\Imag \HH$-valued 1-form $\tilde \omega$ on $\HH^2$:
\[      \tilde \omega = \Imag(\bar q^1 dq^1 + \bar q^2 dq^2)     \]
Then define $\omega$ on $S^7$ by $\omega = i^* \tilde \omega$. This apparently arbitrary definition will be motivated shortly. After we work out the explicit action of this 1-form on tangent vectors, we will show that the horizontal subspaces that it generates are the orthogonal complements of $V_p S^7$ with respect to the usual quaternionic inner product. Therefore $\omega$ is a particularly nice candidate for a connection 1-form on $S^7$, as its horizontal subspaces are easy to visualize. With this motivation in mind, we work from the definition of $\omega$ as a pullback. For every $p \in S^7$ and every $X \in T_p S^7$, we have:
\[     \omega_p (X) = \tilde \omega_p (i_{*p} X)    \]
In order to unpack this notation, we write $p = (p^1, p^2) \in S^7 \subset \HH^2$, and $X = (X^1, X^2) \in T_p(S^7) \subset T_p(\HH^2) = T_{p^1} (\HH) \times T_{p^2} (\HH)$. Then:
\begin{align*}
\omega_p(X) &= \Imag(\bar q^1 dq^1 + \bar q^2 dq^2)(p^1, p^2)(X^1, X^2)  \\
&= \Imag[\bar p^1 dq^1(X^1, X^2) + \bar p^2 dq^2(X^1, X^2)] 
\end{align*}
But note that:
\[   dq^j(X^1, X^2) = (X^1(q^j), X^2(q^j)) = x^1 \frac{\p q^j}{\p q^1} + x^2 \frac{\p q^j}{\p q^2} = x^1 \delta_{j1} + x^2 \delta_{j2} \]
On the left side of the second equal sign, $X^i$ are tangent vectors, that can act on the smooth function $q^j$ and return another smooth function. On the right side of the second equal sign, $x^i$ are the components of $X^i$ in the $\frac{\p}{\p q^i}$ direction. Obviously, each $X^i$ only has a component in the $\frac{\p}{\p q^i}$ direction, because it belongs to the tangent space $T_{p^i}\HH$. Then our expression for the action of $\omega$ simplifies to:
\[       \omega_p(X) = \Imag(\bar p^1 x^1 + \bar p^2 x^2)  \]
From here we can prove that $\omega$ has the properties of a connection on $S^7$. Before we do this, though, we prove the claim made earlier that the horizontal subspaces given by $\omega$ are orthogonal complements to $V_p S^7$. For this we need compute the orthogonal complement, and show that it is equal to the kernel of $\omega$, i.e. the vectors $X \in T_p S^7$ such that $\Imag(\bar p^1 x^1 + \bar p^2 x^2) = 0$. Recall that the usual inner product on $\HH^2$ is $\langle  (p^1, p^2) , (X^1, X^2) \rangle = \Real(\bar p^1 X^1 + \bar p^2 X^2)$. We now consider $V_p S^7$, which is the same as the subspace of $T_p S^7$ that is also tangent to the fiber of $\mathcal{P}$ containing $p$. Since the fiber is $\{ (p^1 g, p^2 g) : g\in Sp(1) \}$, we can write $V_p S^7$ as $\{ (p^1 a, p^2 a) : a \in \mathfrak{sp}(1) = \Imag \HH \}$. Then the orthogonal complement to $V_p S^7$ is the set of $(v^1, v^2) \in T_p S^7$ such that:
\begin{align*}
0 &= \langle (p^1 a, p^2 a), (v^1, v^2) \rangle \\
&= \Real(\overline{p^1 a} v^1 + \overline{p^2 a} v^2) \\
&= \Real[\bar a (\bar p^1 v^1 + \bar p^2 v^2)]
\end{align*}
But $\bar a$ is purely imaginary, so this means $\Imag(\bar p^1 v^1 + \bar p^2 v^2) = 0$. But this is precisely the kernel of $\omega$.

Having established this, we can finally show that $\omega$ has the properties of a connection 1-form on $S^7$. First we show that it is right equivariant under the standard action $\sigma$ of $Sp(1)$ on $S^7$. (By the standard action we mean $\sigma_g(q^1, q^2) = (q^1 g, q^2 g)$.) In other words, we need to show that for each $g \in Sp(1), p \in S^7, X \in T_{p \cdot g^{-1}}(S^7)$, the following holds:
\[     \omega_p\big((\sigma_g)_{*p\cdot g^{-1}}(X)\big) = \Ad_{g^{-1}}\big(\omega_{p\cdot g^{-1}} (v)\big)   \]
Let's first work with the LHS. Let $\gamma_1(t), \gamma_2(t)$ be two curves in $\HH$ such that $\dot \gamma_1|_{t=0} = X^1$ and $\dot \gamma_2|_{t=0} = X^2$. Then:
\begin{align*}      
(\sigma_g)_{*p\cdot g^{-1}}(X) &= (\sigma_g)_{*p\cdot g^{-1}}(X^1, X^2) \\
&= \left. \frac{\p}{\p t} \right|_{t=0} \sigma_g (\gamma_1(t), \gamma_2(t)) \\
&= \left. \frac{\p}{\p t} \right|_{t=0} (\gamma_1(t) g, \gamma_2(t) g) \\
&= (X^1 g, X^2 g)
\end{align*}
Under the standard identification of $T_p \HH$ with $\HH$, we rewrite this as $(x^1 g, x^2g)$, where $x^1, x^2$ are the components of $X^1, X^2$. Therefore the LHS becomes $\omega_p(x^1 g, x^2g) = \Imag(\bar p^1 x^1 g + \bar p^2 x^2 g)$. On the other hand we have on the RHS:
\begin{align*}
\omega_{p\cdot g^{-1}} (X) &= \Imag(\overline{p^1 g^{-1}}x^1 + \overline{p^2 g^{-1}} x^2) \\
&= \Imag(\overline{g^{-1}} \bar p^1 x^1 + \overline{g^{-1}} \bar p^2 x^2) \\
&= \Imag(g \bar p^1 x^1 + g \bar p^2 x^2)
\end{align*}
Since $g\in Sp(1)$ implies $g = \overline{g^{-1}}$. Then we have:
\[     RHS = g^{-1} \Imag(g \bar p^1 x^1 + g \bar p^2 x^2) g  = \Imag( \bar p^1 x^1 g +  \bar p^2 x^2 g)     \]
Therefore $LHS = RHS$, and this shows that $\omega$ is right equivariant.

The other property we need to check is that $\omega$ acts trivially on fundamental vector fields, i.e. $\omega_p (\tilde A (p)) = A$. This is a simple consequence of the definition of $\tilde A$ as the velocity vector at $t=0$ of the curve:
\[ \gamma_p(t) = p \cdot \exp(tA) =  \big(p^1 \exp(tA) , p^2 \exp(tA)\big) \]
Explicitly computing the velocity vector gives $\tilde A(p) = (p^1 A, p^2 A)$. Then:
\[    \omega_p(\tilde A(p)) = \Imag( \bar p^1 p^1 A + \bar p^2 p^2 A ) = \Imag((|p^1|^2 + |p^2|^2 )A) = \Imag(A) = A   \]
This finishes the proof that $\omega$ is a connection on the bundle $Sp(1) \to S^7 \to S^4$. In later sections we will come back to this principal bundle and the BPST connection $\omega$, and use them to study the isotopic spin of a physical system.

We briefly mention here that an analogous construction exists for the complex Hopf bundle, $U(1) \to S^3 \to S^2$. Here we regard $S^3$ as unit length vectors in $\C^2$, we let $i:S^3 \to \C^2$ be the inclusion map and we define a 1-form on $S^3$ as:
\[       \omega = i^* (\bar z^1 dz^1 + \bar z^2 dz^2)       \]
One can then show that this 1-form is a connection, and that it is the natural connection for $S^3$, in the sense that its horizontal subspaces are orthogonal complements in $\C^2$ to $V_p S^3$. We leave these calculations as exercise. We note, however, the beautiful similarity between the connections for the quaternionic and complex Hopf bundles. Modulo some issues of noncommutativity for quaternions, one can go from one to the other by simply exchanging the quaternions $q$ for complex numbers $z$ and viceversa.

We will also work with the complex Hopf bundle and its natural connection in the later sections. Concretely, we will use it to describle the electrodynamics of a magnetic monopole.


















\section{Curvature}

Now that we are somewhat familiar with connections on principal bundles, the next object
of interest will be the curvature associated to a connection. At this point in time we lack
the background to justify the choice of name `curvature,' but we shall forge ahead regardless. 
Before we define the curvature, however, it will be useful to state some generalities concerning
exterior derivatives and wedge products of vector-valued forms. Note that when not stated otherwise,
the contents of this section will be in the context of a principal $G$-bundle $P$ over $M$.

\begin{defn}
    Let $\omega$ be a $\fr g$-valued $p$-form on $\omega$ a manifold $M$ and $X_i$ be vector fields on $M$.
    We define the \textbf{exterior derivative of} $\omega$ to be the $(p+1)$-form given in coordinates as
    \[d\omega = (d\omega^i)e_i\]
    where $\{e_i\}$ is a basis for $\fr g$, and $d$ is the usual exterior derivative.
\end{defn}

\begin{defn}
    \label{defn:wedge}
    Let $\omega$ and $\eta$ be $V$-valued $p$- and $q$-forms, respectively. We can define a $V$-valued $(p+q)$-form
    called the \textbf{wedge product} $[\omega\wedge\eta]$ as
    \[ [\omega\wedge\eta](v,w)=\frac{1}{p!q!}\sum_{\sigma\in S_{p+q}}\sgn(\sigma)\big[\omega(\sigma\cdot v),\eta(\sigma\cdot w)\big],\]
    where $[-,-]$ is a bilinear map $V\times V\to V$, $S_{p+q}$ is the symmetric group on $p+q$ letters,
    and $v,w$ are vectors with $p$ and $q$ components each (with the action of $S_{p+q}$ being the usual permutation on components).
    Note the similarity to the usual definition of wedge product except for the bilinear map $[-,-]$, which
    is required as there is no product operation on vectors in general. We have kept the notation similar to
    that of the commutator as we will primarily be working with Lie algebra valued forms.
\end{defn}

\begin{rmk}
    Unlike for the usual wedge product, where $\omega\wedge\omega=0$ for a one-form $\omega$, the wedge product of a
    $V$-valued one-form $\eta$ with itself is not necessarily zero:
    \[ [\eta\wedge\eta](v,w)=[\eta(v),\eta(w)]-[\eta(w),\eta(v)=2[\eta(v),\eta(w)].\]
\end{rmk}

\begin{defn}
We define the \textbf{curvature} $\Omega$ of a connection one-form $\omega$ as follows. For each $p\in P$ (for $P$ a principal $G$-bundle over $M$) and for all $X,Y\in T_pP$, we let $\Omega$ be the $\fr g$-valued two-form given by
\[\Omega_p(X,Y)=(d\omega)_p(X_h,Y_h),\]
i.e. the exterior derivative of the connection evaluated on the horizontal components of its arguments. The curvature form $\Omega$
is indeed smooth: $d\omega$ is smooth since the connection is smooth, and $X_h,Y_h$ are smooth if $X,Y$ (as vector fields) are smooth
by \hyperref[defn:conn]{Definition \ref*{defn:conn}}. Given two vector fields $X,Y$ on $P$, we can compute
\begin{align*}
    \Omega(X,Y)&=d\omega(X_h,Y_h)\\
    &=X_h\omega(Y_h)-Y_h\omega(X_h)-\omega([X_h,Y_h])\\
    &=-\omega([X_h,Y_h]),
\end{align*}
where we have used the usual formula for the exterior derivative of a one-form (convince yourself that this holds in the $\fr g$-valued
case as well, with the vector fields acting componentwise\todo{make this an exercise?}) as well as the properties of the connection. This gives us a geometric flavor
of what the curvature does; in particular, it returns zero if and only if $[X_h,Y_h]$ is horizontal.
\end{defn}

The following results expose some of the useful properties of $\Omega$.

\begin{lem}
Let $P$ be a principal $G$-bundle over $M$ with $\omega$ a connection one-form. Then the curvature $\Omega$ of $\omega$ is right-equivariant:
\[(R_g)^*\Omega(X,Y)=\Ad(g^{-1})\circ \Omega(X,Y).\]
\end{lem}
\begin{proof}
As the exterior derivative commutes with pullbacks by smooth maps, we have that
\begin{align*}
(R_g)^*\Omega(X,Y)&=R_g^*(d\omega)(X_h,Y_h)\\
&=d((R_g)^*\omega)(X_h,Y_h)\\
&=d(\Ad(g^{-1})\omega)(X_h,Y_h)\\
&=\Ad(g^{-1})d\omega(X_h,Y_h)\\
&=\Ad(g^{-1})\Omega(X,Y)
\end{align*}
\end{proof}

\begin{lem}[Structure equation]
    \label{lem:curvature_structure}
    The curvature $\Omega$ of a connection one-form $\omega$ satisfies 
    \begin{equation}
        \Omega=d\omega + \frac{1}{2}[\omega\wedge\omega].
        \label{eq:curvature_structure}
    \end{equation}
\end{lem}
\begin{proof}
    Using the \hyperref[defn:wedge]{definition} of the wedge product, it suffices to show that
    \[d\omega(X_h,Y_h)=d\omega(X,Y)+[\omega(X),\omega(Y)],\]
    for all smooth vector fields $X,Y$ on $P$. Writing $X=X_h+X_v$ and $Y=Y_h+Y_v$ and expanding
    via bilinearity, one finds that it suffices to prove the structure equation for the three cases:
    $X,Y$ both horizontal, $X,Y$ both vertical, and $X,Y$ vertical and horiztonal respectively.
    The first case is easy: $\omega(X)=\omega(X_h)=0$ and $\omega(Y)=\omega(Y_h)=0$. The commutator vanishes
    and we are left with $d\omega(X_h,Y_h)=d\omega(X,Y)$, which is true in this case. For $X,Y$ both
    vertical, we note that $X$ and $Y$ can be written in terms of fundamental vector fields, $X=\tilde A,Y=\tilde B$
    for some $A,B\in\fr g$. In this case, using the fact that $\omega(\tilde A)=A$ and similarly for $B$, we must have that
    \begin{align*}
        0&=d\omega(\tilde A,\tilde B)+[\omega(\tilde A),\omega(\tilde B)]\\
        &=\tilde AB-\tilde BA-\omega\left([\tilde A,\tilde B]\right)+[A,B]\\
        &=-\omega\left(\widetilde{[A,B]}\right)+[A,B]\\
        &=-[A,B]+[A,B]=0,
    \end{align*}
    where we have used the fact that $A$ and $B$ are constant $\fr g$-valued one-forms, thus vanishing under
    derivation by vector fields. Finally, in the case of $X=\tilde A$ vertical and $Y$ horizontal, we find that
    \begin{align*}
        0&=d\omega(\tilde A,Y_h)\\
        &=\tilde A\omega(Y_h)-Y_hA-\omega([\tilde A,Y_h])\\
        &=-\omega([\tilde A,Y_h]).
    \end{align*}
    It remains to show that the Lie bracket of a vertical vector field with a horizontal vector field is again
    horizontal. To do this, let $\alpha$ be the flow of $\tilde A$; then the Lie
    bracket is the Lie derivative\todo{Refer to Lee for Lie derivatives}
    \begin{align*}
        [\tilde A, Y_h]_p=\lim_{t\to 0}\frac{d(\alpha_{-t})_{\alpha_t(p)}(Y_h)_{\alpha_t(p)}-(Y_h)_p}{t}.
    \end{align*}
    We can write the integral curve determined by $A$ as $\alpha_t(p)=p\cdot e^{tA}$ and thus
    \[d(\alpha_{-t})_{\alpha_t(p)}=d(R_{e^{-tA}})_{p\cdot e^{tA}}.\]
    By the \hyperref[defn:conn]{right-equivariance} of horizontal subspaces, since $(Y_h)_{p\cdot e^{tA}}$ is horizontal,
    so is $d(R_{e^{-tA}})_{p\cdot e^{tA}}(Y_h)_{p\cdot e^{tA}}$ as a vector in $T_pP$; consequently, the Lie derivative $[\tilde A,Y_h]$ is a
    horizontal vector field. This concludes the verification of the structure equation.
\end{proof}




\section{Local descriptions: gauge fields}
\section{References}
\section{Exercises}













\chapter{Yang-Mills Theory and Instantons}
\section{References}
\section{Exercises}


\end{document}








